<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> DOM元素的尺寸和位置 · wah's life</title><meta name="description" content="总结一些高级浏览器或移动端获取DOM元素的尺寸和位置的属性的区别及常用方法
DOM元素的尺寸box-sizing对属性的影响box-sizing的属性值会直接影响盒模型的尺寸计算。一般常用的box-sizing值有几个:

content-box： （默认值）标准盒模型。width = 内容的宽度，height = 内容的高度。宽度和高度都不包含内容的边框（border）和内边距（padding）border-box：width 和 height 属性包括内容，填充和边框，但不包括边距。padding-box: 只有火狐支持了，不展开研究

以下面的代码为例。
12&lt;t"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/utakata.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/author.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="http://weibo.com/shihuacivis" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="http://shihuacivis.lofter.com" target="_blank" class="nav-list-link">LOFTER</a></li><li class="nav-list-item"><a href="https://github.com/shihuacivis" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">DOM元素的尺寸和位置</h1><div class="post-meta"><div class="post-time">Mar 19, 2017</div></div><div class="post-content"><p>总结一些高级浏览器或移动端获取DOM元素的尺寸和位置的属性的区别及常用方法<br><a id="more"></a></p>
<h2 id="DOM元素的尺寸">DOM元素的尺寸</h2><h3 id="box-sizing对属性的影响">box-sizing对属性的影响</h3><p>box-sizing的属性值会直接影响盒模型的尺寸计算。一般常用的box-sizing值有几个:</p>
<blockquote>
<p><code>content-box</code>： （默认值）标准盒模型。width = 内容的宽度，height = 内容的高度。宽度和高度都不包含内容的边框（border）和内边距（padding）<br><code>border-box</code>：width 和 height 属性包括内容，填充和边框，但不包括边距。<br><code>padding-box</code>: 只有火狐支持了，不展开研究</p>
</blockquote>
<p>以下面的代码为例。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"boderBox"</span> <span class="attribute">style</span>=<span class="value">"width: 200px;height: 100px;box-sizing: border-box;border: 5px solid #123456; margin: 20px 10px; padding: 7px;"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"contentBox"</span> <span class="attribute">style</span>=<span class="value">"width: 200px;height: 100px;box-sizing: content-box;border: 5px solid #654321; margin: 20px 10px; padding: 7px;"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$boderBox = <span class="built_in">document</span>.querySelector(<span class="string">'#boderBox'</span>);</span><br><span class="line">$contentBox = <span class="built_in">document</span>.querySelector(<span class="string">'#contentBox'</span>);</span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">'offsetWidth'</span>, $boderBox.offsetWidth); <span class="comment">// 200</span></span><br><span class="line"><span class="built_in">console</span>.info(<span class="string">'offsetWidth'</span>, $contentBox.offsetWidth); <span class="comment">// 224</span></span><br></pre></td></tr></table></figure>
<p>可见<code>border-box</code>和<code>content-box</code>获取到的offsetWidth值是不同的。<code>content-box</code>的<br>计算方法：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">offsetWidth = <span class="number">200</span>(内容宽度) + <span class="number">5</span> * <span class="number">2</span>(左右border宽度) + <span class="number">7</span> * <span class="number">2</span> (左右padding值)</span><br></pre></td></tr></table></figure></p>
<p>###不同属性值的含义</p>
<p>再来看看不同属性值所指代的含义：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"contentBox"</span> <span class="attribute">style</span>=<span class="value">"width: 200px;height: 100px;box-sizing: content-box;border: 5px solid #654321; margin: 20px 10px; padding: 7px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">style</span>=<span class="value">"width: 250px;height: 50px;background: green"</span>&gt;</span>aaa<span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">  $contentBox = document.querySelector('#contentBox');</span><br><span class="line"></span><br><span class="line">  console.info('offsetWidth', '200（不含溢出的内容width）+ 7 * 2(内边距) + 5 * 2(边框)', $contentBox.offsetWidth); // 224</span><br><span class="line"></span><br><span class="line">  console.info('clientWidth', '200（不含溢出的内容width）+ 7 * 2 （内边距）- 滚动条宽度（if overflow-y == "scroll"）', $contentBox.clientWidth); // 214</span><br><span class="line">  </span><br><span class="line">  console.info('scrollWidth', '250(内容实际宽度) + 7（内边距）', $contentBox.scrollWidth); // 257</span><br></pre></td></tr></table></figure>
<p>这里需要注意，当父容器加上<code>overflow-y: scroll</code>属性后，clientwidth会再减去15px的滚动条宽度(因不同系统不同浏览器而异)。同理<code>overflow-x: scroll</code>后高度也会减去15px(因不同系统不同浏览器而异)。</p>
<p>因此这三种属性可以理解为：</p>
<blockquote>
<p><code>offsetWidth</code>： 元素在页面布局中实际所占的宽度<br><code>clientWidth</code>： 元素边框内部可视区域（不含溢出部分）的宽度<br><code>scrollWidth</code>: 元素内容实际宽度（含溢出）</p>
</blockquote>
<h2 id="元素的位置">元素的位置</h2><p>一般主要使用三个属性值： </p>
<blockquote>
<p><code>offsetLeft</code>： 元素外框相对于offsetParent的位置（父容器的offsetLeft为起点）<br><code>clientLeft</code>： 元素内框（border内）对于外框的宽度，即边框border的宽度<br><code>scrollLeft</code>: 元素滚动到的位置</p>
</blockquote>
<p>so一般使用<code>offsetLeft</code>和<code>offsetTop</code>获取元素的位置。<br>需要注意，当元素父容器有css定位时（position）,offsetParent返回一个指向最近的（closest，指包含层级上的最近）包含该元素的定位元素。如果没有定位的元素，则 offsetParent 为最近的 table 元素对象或根元素（标准模式下为 html；quirks 模式下为 body）。当元素的 style.display 设置为 “none” 时，offsetParent 返回 null。offsetParent 很有用，因为 offsetTop 和 offsetLeft 都是相对于其内边距边界的。</p>
<h3 id="getBoundingClientRect">getBoundingClientRect</h3><p>可用于返回改元素相对于视口的位置。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"demo"</span> <span class="attribute">style</span>=<span class="value">"position: absolute;left: 70px;margin-left: 100px;border:  5px solid green;width: 100%"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"boderBox"</span> <span class="attribute">style</span>=<span class="value">"position: absolute; top:100px;left:100px; width: 200px;height: 100px;border:  10px solid #ccc"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">  $boderBox = document.querySelector('#boderBox');</span><br><span class="line">  var rectObject = $boderBox.getBoundingClientRect();</span><br><span class="line"></span><br><span class="line">  console.info('offsetLeft', '相对于父容器的位置', $boderBox.offsetLeft); // 100</span><br><span class="line">  console.info('rect-left', '相对于浏览器视口左上角的位置', rectObject.left); // 275</span><br></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a class="prev"> </a><a href="/2016/10/23/20161023_hins/" class="next">下一篇</a></div><div data-thread-key="2017/03/19/20190319_domSizePos/" data-title="DOM元素的尺寸和位置" data-url="http://shiwah.me/2017/03/19/20190319_domSizePos/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-32"><li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li><li data-toggle="ds-share-icons-more" class="ds-share-icons-more"><a href="javascript:;" class="ds-more">分享到</a></li><li><a href="javascript:;" data-service="weibo" class="ds-weibo">新浪微博</a></li><li><a href="javascript:;" data-service="wechat" class="ds-wechat">微信</a></li><li><a href="javascript:;" data-service="facebook" class="ds-facebook">Facebook</a></li><li><a href="javascript:;" data-service="twitter" class="ds-twitter">Twitter</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/03/19/20190319_domSizePos/" data-title="DOM元素的尺寸和位置" data-url="http://shiwah.me/2017/03/19/20190319_domSizePos/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"shihuacivis"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.unstable.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script></footer><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?97a139550523c2b9972a6f6f339bb382";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>