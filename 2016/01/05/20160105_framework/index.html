<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 构思一个轻量级的HTML5棋牌游戏框架 · shihuacivis' life</title><meta name="description" content="我在思考如何构思一个通用的HTML5棋牌游戏框架希望能够通过这套框架，降低游戏的开发复杂度，提高效率
有下面几个简单目标：

1.游戏引擎基于目前所使用的cocos2d-js-lite，但未来可能要替换成别的，甚至用纯HTML开发
2.游戏界面能够基于配置开发，不需要有太重界面的构建代码
3.组件化开发，希望游戏像拼装积木一样简单，在一定范围内自由增减
4.只做游戏的核心玩法部分，至于房间列表、商城、个人中心等等这些个性化的功能部分交给HTML去做吧。整个混合式H5游戏开发，听起来就高大上。

为了将来能够替换掉引擎，所以首先要先隔离引擎。就像汽车只提供方向盘和档案，至于里面用的是DSG还是AT、是涡轮增压还是自然吸气不用去管。简而言之就是封装引擎底层方法，构建一套独立于引擎的游戏模型。
根据之前斗地主开发的经验这个框架需要实现下面几大功能：


界面渲染模块
场景（底层容器）
容器（分层）
元素（静态）
按钮（动态）
动画
&lt;/"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.ico"><link rel="stylesheet" href="/css/utakata.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/author.jpg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博文</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">关于</a></li><li class="nav-list-item"><a href="http://weibo.com/shihuacivis" target="_blank" class="nav-list-link">微博</a></li><li class="nav-list-item"><a href="http://shihuacivis.lofter.com" target="_blank" class="nav-list-link">LOFTER</a></li><li class="nav-list-item"><a href="https://github.com/shihuacivis" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">构思一个轻量级的HTML5棋牌游戏框架</h1><div class="post-meta"><div class="post-time">Jan 5, 2016</div></div><div class="post-content"><p>我在思考如何构思一个通用的HTML5棋牌游戏框架<br>希望能够通过这套框架，降低游戏的开发复杂度，提高效率<br><a id="more"></a></p>
<p>有下面几个简单目标：</p>
<ul>
<li>1.游戏引擎基于目前所使用的cocos2d-js-lite，但未来可能要替换成别的，甚至用纯HTML开发</li>
<li>2.游戏界面能够基于配置开发，不需要有太重界面的构建代码</li>
<li>3.组件化开发，希望游戏像拼装积木一样简单，在一定范围内自由增减</li>
<li>4.只做游戏的核心玩法部分，至于房间列表、商城、个人中心等等这些个性化的功能部分交给HTML去做吧。整个混合式H5游戏开发，听起来就高大上。</li>
</ul>
<p>为了将来能够替换掉引擎，所以首先要先隔离引擎。<br>就像汽车只提供方向盘和档案，至于里面用的是DSG还是AT、是涡轮增压还是自然吸气不用去管。<br>简而言之就是封装引擎底层方法，构建一套独立于引擎的游戏模型。</p>
<p>根据之前斗地主开发的经验<br>这个框架需要实现下面几大功能：</p>
<blockquote>
<ul>
<li>界面渲染模块<ul>
<li>场景（底层容器）</li>
<li>容器（分层）</li>
<li>元素（静态）</li>
<li>按钮（动态）</li>
<li>动画</li>
</ul>
</li>
<li>界面通用组件<ul>
<li>背景</li>
<li>卡牌</li>
<li>出牌区域</li>
<li>手牌区域</li>
<li>菜单</li>
<li>动画交互区域</li>
<li>触控区域</li>
</ul>
</li>
<li>游戏通用功能<ul>
<li>卡牌排序</li>
<li>发布/订阅事件管理器</li>
</ul>
</li>
<li>环境适配功能<ul>
<li>资源加载管理</li>
<li>屏幕自适应</li>
<li>声音引擎</li>
</ul>
</li>
</ul>
</blockquote>
<h2 id="全局变量">全局变量</h2><blockquote>
<ul>
<li>卡牌种类和尺寸</li>
</ul>
</blockquote>
<h2 id="界面渲染模块">界面渲染模块</h2><h3 id="场景生成器">场景生成器</h3><p>作为游戏的父容器，并定义游戏中包含哪些容器层</p>
<h3 id="容器分层">容器分层</h3><p>通过配置项定义游戏模型，将场景分层，常见的如背景层、卡牌层、菜单层、动画层、交互层。<br>参照css的思维,预设一下参数,用于生成场景层:</p>
<blockquote>
<ul>
<li>尺寸宽高  width height</li>
<li>背景图片  background</li>
<li>是否显示  display</li>
<li>布局位置  position (left top)   </li>
<li>父容器id  #id</li>
<li>显示层级  z-index</li>
</ul>
</blockquote>
<p>容器还会有一个children list列表，里面会包含容器层内所有的元素</p>
<h3 id="元素">元素</h3><p>一般用于生成某张图片对应的元素:</p>
<blockquote>
<ul>
<li>尺寸宽高  width height</li>
<li>背景图片  background</li>
<li>图片位置  spirte position雪碧图位置</li>
<li>是否显示  display</li>
<li>布局位置  position (left top)   </li>
<li>父容器id  #id</li>
<li>显示层级  z-index</li>
</ul>
</blockquote>
<p>元素除了自身的属性，还会包含一些动画及其执行方法。</p>
<h3 id="动画">动画</h3><p>定义卡牌游戏中常见的几种动画：move、fadein、fadeout……<br>由于不同引擎对动画的支持不一样，所以动画这块可以自己进行封装，不做太多统一。</p>
<h3 id="按钮">按钮</h3><p>按钮基本上跟元素一致，但是会多了几个属性：</p>
<blockquote>
<ul>
<li>disabled样式</li>
<li>active样式</li>
<li>点击事件的回调</li>
</ul>
</blockquote>
<h2 id="界面通用组件">界面通用组件</h2><h3 id="背景">背景</h3><h3 id="卡牌">卡牌</h3><p>基于<code>元素</code>，根据配置生成不同大小、花色的卡牌，包含牌的升起和降下动画</p>
<h3 id="出牌区域">出牌区域</h3><p>可设定出牌区域的大小、位置、每行显示的卡牌数、排列方向</p>
<h3 id="手牌区域">手牌区域</h3><p>手牌区域大小、位置、发牌动画、控制其中的卡牌升起降下的方法</p>
<h3 id="菜单">菜单</h3><p>将按钮组合起来，布局到界面上</p>
<h2 id="环境适配功能">环境适配功能</h2><h3 id="资源加载管理">资源加载管理</h3><p>配置项的设计，便于合图、和加载读取</p>
<h3 id="屏幕自适应">屏幕自适应</h3><p>cocos2d-js中倒是相对粗暴一些</p>
<h3 id="声音引擎">声音引擎</h3><p>音效的配置项设计</p>
<h2 id="游戏通用功能">游戏通用功能</h2><h3 id="卡牌排序">卡牌排序</h3><p>基本现成了</p>
<h3 id="发布/订阅事件管理器">发布/订阅事件管理器</h3><p>基本现成了</p>
<p><strong>完事具备，就差一个程序猿了</strong></p>
</div></article></div></section><footer><div class="paginator"><a href="/2016/01/07/20160106_webaudio/" class="prev">上一篇</a><a href="/2016/01/05/20160105_iframe/" class="next">下一篇</a></div><div data-thread-key="2016/01/05/20160105_framework/" data-title="构思一个轻量级的HTML5棋牌游戏框架" data-url="http://www.shihua.im/2016/01/05/20160105_framework/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"shihuacivis"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script></footer><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?97a139550523c2b9972a6f6f339bb382";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.bootcss.com/mathjax/2.5.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>